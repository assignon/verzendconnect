{% extends 'base.html' %}
{% load static seo_tags %}

{% block title %}{{ category.name }} - Event Rental Category | VerzendConnect{% endblock %}
{% block meta_title %}{{ category.name }} - Event Rental Category{% endblock %}
{% block meta_description %}{{ category.description|default:category.name|truncate_description }}{% endblock %}
{% block meta_keywords %}{{ category.name }}, event rental, party supplies, {{ category.name|lower }} rental{% endblock %}
{% block og_title %}{{ category.name }} - Event Rental Category{% endblock %}
{% block og_description %}{{ category.description|default:category.name|truncate_description }}{% endblock %}
{% block twitter_title %}{{ category.name }} - Event Rental Category{% endblock %}
{% block twitter_description %}{{ category.description|default:category.name|truncate_description }}{% endblock %}
{% block canonical_url %}{% absolute_url category.get_absolute_url %}{% endblock %}

{% block content %}
<!-- Category Header -->
<section class="relative py-16 md:py-24 overflow-hidden">
    {% if category.image %}
    <div class="absolute inset-0">
        <img src="{{ category.image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gradient-to-r from-secondary-900/90 to-secondary-900/60"></div>
    </div>
    {% else %}
    <div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center">
        <img src="{% static 'images/placeholder.svg' %}" alt="{{ category.name }}" class="w-32 h-32 object-contain opacity-30">
    </div>
    {% endif %}
    
    <div class="container-custom relative">
        <!-- Breadcrumb -->
        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="flex items-center gap-2 text-sm text-white/70">
                <li><a href="{% url 'core:home' %}" class="hover:text-white">Home</a></li>
                <li><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/></svg></li>
                {% if category.parent %}
                <li><a href="{{ category.parent.get_absolute_url }}" class="hover:text-white">{{ category.parent.name }}</a></li>
                <li><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/></svg></li>
                {% endif %}
                <li class="text-white font-medium">{{ category.name }}</li>
            </ol>
        </nav>
        
        <h1 class="font-display text-4xl md:text-5xl font-bold text-white mb-4">
            {{ category.name }}
        </h1>
        {% if category.description %}
        <p class="text-white/80 text-lg max-w-2xl">{{ category.description }}</p>
        {% endif %}
        <p class="mt-4 text-white/60">{{ products.count }} products</p>
    </div>
</section>

<div class="container-custom py-8 md:py-12">
    <!-- Subcategories -->
    {% if subcategories %}
    <div class="mb-12">
        <h2 class="font-semibold text-lg text-secondary-800 mb-4">Subcategories</h2>
        <div class="flex flex-wrap gap-3">
            {% for sub in subcategories %}
            <a href="{{ sub.get_absolute_url }}" class="btn btn-secondary btn-sm">
                {{ sub.name }}
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Sort Bar -->
    <div class="flex justify-between items-center mb-6">
        <p class="text-secondary-600">
            Showing <span class="font-semibold text-secondary-800">{{ products.count }}</span> products
        </p>
        <select onchange="window.location.href=this.value" class="input py-2 w-auto">
            <option value="?sort=-created_at">Newest</option>
            <option value="?sort=price_asc">Price: Low to High</option>
            <option value="?sort=price_desc">Price: High to Low</option>
            <option value="?sort=name">Name</option>
        </select>
    </div>
    
    <!-- Products Grid -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
        {% for product in products %}
        {% include 'core/partials/product_card.html' with product=product %}
        {% empty %}
        <div class="col-span-full text-center py-16">
            <svg class="w-16 h-16 mx-auto text-secondary-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
            </svg>
            <h3 class="text-xl font-semibold text-secondary-700 mb-2">No products yet</h3>
            <p class="text-secondary-500 mb-4">Check back soon for new arrivals!</p>
            <a href="{% url 'core:product_list' %}" class="btn btn-primary">Browse All Products</a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

